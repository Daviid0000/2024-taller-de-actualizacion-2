<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tensorflow/4.17.0/tf.min.js"></script>
    <title>Tensor Flow</title>
</head>
<body>

    <h1>Tensor Flow</h1>
    <hr>
    
    <script>

        const valores = tf.range(1, 10)
        valoresRepetidos = tf.tile(valores, [11])
        const nuevoValor = tf.tensor1d([1]);
        const valoresConNuevo = tf.concat([valoresRepetidos, nuevoValor]);
        tensor1 = tf.reshape(valoresConNuevo, [10, 10])
        tensor1.print();
        
        const valores2 = tf.range(1, 10)
        valoresRepetidos2 = tf.tile(valores2, [11])
        const nuevoValor2 = tf.tensor1d([1]);
        const valoresConNuevo2 = tf.concat([valoresRepetidos2, nuevoValor2]);
        tensor2 = tf.reshape(valoresConNuevo2, [10, 10])
        tensor2.print();

        console.log('La memoria antes de multiplicar los tensores: ', tf.memory().numBytes)

        while ((tf.memory().numBytes) <= 5242880) {

            const tensor1 = tf.reshape(valoresConNuevo, [10, 10]);
            const tensor2 = tf.reshape(valoresConNuevo2, [10, 10]); 

             tensor3 = tensor1.mul(tensor2);

            tf.dispose(tensor1)
            tf.dispose(tensor2)
        }
        const MB = ((tf.memory().numBytes)/1024)/1024
        console.log('La memoria final ha llegado a', tf.memory().numBytes, 'lo que es igual a:', MB,'MB');
        tensor3.print()
       
    </script>
</body>
</html>